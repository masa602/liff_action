<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>位置情報</title>
  </head>
  <body>
    <b><font size="6">位置情報を取得中・・・</font></b>
    <!-- <button id="bt">get adress</button> -->
    <script>
      getAdress()
      //document.getElementById('bt').onclick = getAdress;
    
      function getAdress() {
        navigator.geolocation.getCurrentPosition(success);
      }

      function success(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        toGetLocation(latitude, longitude);
      }

      function toGetLocation(latitude, longitude) {
        google.script.run
          .withFailureHandler(onFailure)
          .withSuccessHandler(onSuccess)
          .getLocation(latitude, longitude);
      }

      function onSuccess(geocode) {
        alert(geocode['results'][0]['formatted_address']);//geocodeの中から住所を取得する
      }

      function onFailure(e) {
        alert([e.message, e.stack]);
      }
    </script>
  </body>
</html>